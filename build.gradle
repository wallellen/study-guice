apply plugin: 'java'
apply plugin: 'idea'

sourceCompatibility = '1.8'
targetCompatibility = '1.8'

ext {
    buildNumber = System.getenv("GO_PIPELINE_COUNTER") ?: '0'
    version = "0.0.${buildNumber}"
}

buildscript {
    repositories {
        jcenter()
    }
}

sourceSets {
    main {
        output.resourcesDir = output.classesDir
    }
}

idea {
    project {
        jdkName = '1.8'
        languageLevel = '1.8'
    }
}

repositories {
    jcenter()
    mavenCentral()
}

dependencies {
    compile 'com.google.inject:guice:latest.release',
            'org.apache.logging.log4j:log4j-core:2.+',
            'org.apache.logging.log4j:log4j-slf4j-impl:2.+'
    testCompile 'junit:junit:latest.release',
            'org.hamcrest:hamcrest-all:latest.release'
}

task copyResources << {
    copy {
        from 'src/test/java'
        include '**/*.xml'
        into sourceSets.test.output.classesDir
    }
}
test.dependsOn copyResources